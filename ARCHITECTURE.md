# AI í¬íƒˆ ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ

## ğŸ“Š ì‹œìŠ¤í…œ ê°œìš”

### ì„¤ê³„ ì›ì¹™
- **ê²€ì¦ëœ ì•ˆì •ì„±**: SYGenai ìš´ì˜ í™˜ê²½ ê²€ì¦ íŒ¨í„´ í™œìš©
- **í™•ì¥ ê°€ëŠ¥ì„±**: ëª¨ë“ˆí™”ëœ ì„¤ê³„ë¡œ ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
- **ì„±ëŠ¥ ìµœì í™”**: Redis ì—†ì´ë„ ê³ ì„±ëŠ¥ ë³´ì¥í•˜ëŠ” ìºì‹± ì „ëµ
- **ì‚¬ìš©ì ì¤‘ì‹¬**: ì§ê´€ì ì´ê³  ë°˜ì‘ì„± ìˆëŠ” ì‚¬ìš©ì ê²½í—˜

### ê¸°ìˆ  ìŠ¤íƒ
```
â”Œâ”€ Frontend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React 18+ â€¢ TypeScript â€¢ TailwindCSS â€¢ Zustand â€¢ SWR      â”‚
â”œâ”€ API Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FastAPI â€¢ Pydantic â€¢ Uvicorn â€¢ WebSocket                  â”‚
â”œâ”€ AI Agents â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LangGraph â€¢ Claude (Bedrock) â€¢ Gemini (GenerativeAI)      â”‚
â”œâ”€ Data Layer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL â€¢ DynamoDB â€¢ OpenSearch â€¢ S3                   â”‚
â””â”€ Infrastructure â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Docker â€¢ Kubernetes â€¢ GitHub Actions â€¢ AWS/GCP           â”‚
```

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   React Frontend                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Sidebar   â”‚    Chat     â”‚       Canvas           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FastAPI Gateway                          â”‚
â”‚  WebSocket Server â”‚ REST API â”‚ Auth Middleware        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                AI Agent Layer                           â”‚
â”‚ Supervisor â†’ LLM Router â†’ [Web Search|Canvas|RAG]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Data & Storage                           â”‚
â”‚ PostgreSQL â”‚ DynamoDB â”‚ OpenSearch â”‚ S3 â”‚ Cache         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš°
1. **ì‚¬ìš©ì ìš”ì²­** â†’ Frontend (React)
2. **ì˜ë„ ë¶„ì„** â†’ Supervisor Agent
3. **ëª¨ë¸ ë¼ìš°íŒ…** â†’ LLM Router (Claude/Gemini)
4. **ì—ì´ì „íŠ¸ ì‹¤í–‰** â†’ Worker Agent
5. **ê²°ê³¼ ë°˜í™˜** â†’ WebSocket ìŠ¤íŠ¸ë¦¬ë°
6. **ë°ì´í„° ì €ì¥** â†’ PostgreSQL + ìºì‹œ

---

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### PostgreSQL ìŠ¤í‚¤ë§ˆ
```sql
-- ì‚¬ìš©ì
CREATE TABLE users (
    id UUID PRIMARY KEY,
    email VARCHAR(255) UNIQUE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ëŒ€í™”
CREATE TABLE conversations (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    title VARCHAR(500),
    metadata JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ë©”ì‹œì§€
CREATE TABLE messages (
    id UUID PRIMARY KEY,
    conversation_id UUID REFERENCES conversations(id),
    role VARCHAR(50),
    content TEXT,
    metadata JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ì›Œí¬ìŠ¤í˜ì´ìŠ¤
CREATE TABLE workspaces (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    name VARCHAR(500),
    type VARCHAR(100),
    data JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ìºì‹œ í…Œì´ë¸”
CREATE TABLE cache_entries (
    key VARCHAR(255) PRIMARY KEY,
    value JSONB,
    expires_at TIMESTAMP,
    tags TEXT[]
);
```

### ìºì‹œ ì‹œìŠ¤í…œ (2-tier)
```python
class CacheManager:
    """PostgreSQL + ë©”ëª¨ë¦¬ ê¸°ë°˜ ìºì‹±"""
    
    def __init__(self):
        self.memory_cache = {}  # L1: ë¹ ë¥¸ ë©”ëª¨ë¦¬ ìºì‹œ
        self.db = PostgreSQLCache()  # L2: ì˜êµ¬ DB ìºì‹œ
    
    async def get(self, key: str):
        # L1 ìºì‹œ í™•ì¸
        if key in self.memory_cache:
            return self.memory_cache[key]
        
        # L2 ìºì‹œ í™•ì¸
        value = await self.db.get(key)
        if value:
            self.memory_cache[key] = value
        
        return value
```

---

## ğŸ¤– LangGraph Multi-Agent ì•„í‚¤í…ì²˜ (v3.0)

### StateGraph ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ âœ… ì™„ì„±
```python
class LangGraphAgent:
    """LangGraph StateGraph ê¸°ë°˜ ì—ì´ì „íŠ¸"""
    
    def __init__(self):
        # PostgreSQL ì²´í¬í¬ì¸í„°ë¡œ ìƒíƒœ ì˜ì†ì„± ë³´ì¥
        self.checkpointer = PostgresSaver.from_conn_string(DATABASE_URL)
        self.graph = self.build_graph()
    
    def build_graph(self) -> StateGraph:
        workflow = StateGraph(AgentState)
        
        # ë…¸ë“œ ì¶”ê°€ (ì—ëŸ¬ ì•ˆì „ ë˜í¼ ì ìš©)
        workflow.add_node("analyze", self.analyze_node)
        workflow.add_node("execute", self.execute_node) 
        workflow.add_node("validate", self.validate_node)
        
        # ì¡°ê±´ë¶€ ë¼ìš°íŒ…
        workflow.add_conditional_edges(
            "analyze",
            self.should_continue,
            {"continue": "execute", "end": END}
        )
        
        return workflow.compile(checkpointer=self.checkpointer)
```

### 6ê°œ StateGraph ì—ì´ì „íŠ¸ ì™„ì „ êµ¬í˜„
1. **WebSearchAgent**: 5ë‹¨ê³„ StateGraph
   ```
   ì¿¼ë¦¬ë¶„ì„ â†’ ê²€ìƒ‰ì‹¤í–‰ â†’ ê²°ê³¼í•„í„°ë§ â†’ ì½˜í…ì¸ ìƒì„± â†’ ì‘ë‹µìµœì í™”
   ```

2. **CanvasAgent**: 7ë‹¨ê³„ StateGraph  
   ```
   ìš”ì²­ë¶„ì„ â†’ ë©€í‹°ëª¨ë‹¬ì²˜ë¦¬ â†’ ì½˜í…ì¸ ìƒì„± â†’ Canvasì—…ë°ì´íŠ¸ â†’ í’ˆì§ˆê²€ì¦ â†’ ì‘ë‹µìƒì„± â†’ ìµœì í™”
   ```

3. **InformationGapAgent**: 8ë‹¨ê³„ StateGraph
   ```
   ì§ˆë¬¸ë¶„ì„ â†’ ë§¥ë½ìˆ˜ì§‘ â†’ ê°­ì‹ë³„ â†’ ì¶”ê°€ì§ˆë¬¸ â†’ ë‹µë³€ìƒì„± â†’ ê²€ì¦ â†’ ê°œì„  â†’ ì‘ë‹µ
   ```

4. **SupervisorAgent**: ë©”íƒ€-ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°
   ```
   ì‘ì—…ë¶„ì„ â†’ ì—ì´ì „íŠ¸ì„ íƒ â†’ ì‹¤í–‰ê°ë… â†’ ê²°ê³¼í†µí•© â†’ ìµœì í™”
   ```

5. **ParallelProcessingAgent**: ë³‘ë ¬ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°
   ```
   ì‘ì—…ë¶„í•  â†’ ë³‘ë ¬ì‹¤í–‰ â†’ ê²°ê³¼ìˆ˜ì§‘ â†’ í†µí•© â†’ ê²€ì¦
   ```

6. **ToolCallingAgent**: ë„êµ¬ í˜¸ì¶œ ì›Œí¬í”Œë¡œìš°
   ```
   ë„êµ¬ì„ íƒ â†’ ë§¤ê°œë³€ìˆ˜ì¶”ì¶œ â†’ ì‹¤í–‰ â†’ ê²°ê³¼ì²˜ë¦¬ â†’ ì‘ë‹µìƒì„±
   ```

### ì—ëŸ¬ ì•ˆì „ ë…¸ë“œ ë˜í¼ ì‹œìŠ¤í…œ
```python
def create_error_safe_node(agent_name: str, node_name: str, node_func):
    """ëª¨ë“  ë…¸ë“œë¥¼ ì—ëŸ¬ ì•ˆì „í•˜ê²Œ ë§Œë“œëŠ” ë˜í¼"""
    async def error_safe_wrapper(state):
        try:
            result = await node_func(state)
            return result
        except Exception as e:
            logger.error(f"[{agent_name}:{node_name}] Error: {e}")
            # Graceful fallback ì²˜ë¦¬
            return {"error": str(e), "fallback_executed": True}
    
    return error_safe_wrapper
```

### Feature Flag 100% í™œì„±í™” ì‹œìŠ¤í…œ
```python
class LangGraphFeatureFlags:
    def __init__(self):
        # ğŸš€ ëŒ€ë‹´í•œ ì „ë©´ í™œì„±í™” ì„¤ì •
        self.flag_configs = {
            self.LANGGRAPH_WEB_SEARCH: {
                "enabled": True,
                "percentage": 100,  # 100% ì „ë©´ í™œì„±í™”
            },
            self.LANGGRAPH_CANVAS: {
                "enabled": True, 
                "percentage": 100,  # ì „ë©´ ì „í™˜
            },
            # ëª¨ë“  LangGraph ê¸°ëŠ¥ 100% í™œì„±í™”
        }
```

---

## ğŸ”’ ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ì¸ì¦ & ê¶Œí•œ
- **JWT í† í°**: ìƒíƒœì—†ëŠ” ì¸ì¦
- **API í‚¤ ê´€ë¦¬**: í™˜ê²½ë³€ìˆ˜ + ì•”í˜¸í™” ì €ì¥
- **Rate Limiting**: ì‚¬ìš©ìë³„ ìš”ì²­ ì œí•œ
- **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼

### ë°ì´í„° ë³´í˜¸
- **HTTPS í•„ìˆ˜**: ëª¨ë“  í†µì‹  ì•”í˜¸í™”
- **ì…ë ¥ ê²€ì¦**: SQL Injection ë“± ë°©ì§€
- **ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹**: ë¡œê·¸ì—ì„œ API í‚¤ ë“± ì œê±°
- **ì ‘ê·¼ ë¡œê·¸**: ëª¨ë“  API ìš”ì²­ ê¸°ë¡

---

## âš¡ ì„±ëŠ¥ ìµœì í™”

### ìºì‹± ì „ëµ
1. **L1 ë©”ëª¨ë¦¬ ìºì‹œ**: ìì£¼ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° (TTL: 5ë¶„)
2. **L2 DB ìºì‹œ**: ì¤‘ê°„ ê²°ê³¼ ì €ì¥ (TTL: 30ë¶„)  
3. **CDN ìºì‹±**: ì •ì  íŒŒì¼ ë° ì´ë¯¸ì§€

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```sql
-- ì¸ë±ìŠ¤ ìµœì í™”
CREATE INDEX idx_conversations_user_created 
ON conversations(user_id, created_at DESC);

CREATE INDEX idx_messages_conversation 
ON messages(conversation_id, created_at);

CREATE INDEX idx_cache_expires 
ON cache_entries(expires_at) 
WHERE expires_at IS NOT NULL;
```

### í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
- **React.memo**: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
- **Zustand**: íš¨ìœ¨ì ì¸ ìƒíƒœ ê´€ë¦¬
- **SWR**: ë°ì´í„° í˜ì¹­ ìµœì í™”
- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: í•„ìš”í•œ ë¶€ë¶„ë§Œ ë¡œë“œ

---

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ í™˜ê²½
```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
  
  backend:
    build: ./backend
    ports: ["8000:8000"]
    environment:
      - DATABASE_URL=postgresql://...
  
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=aiportal
```

### í”„ë¡œë•ì…˜ í™˜ê²½
- **ì»¨í…Œì´ë„ˆí™”**: Docker + Kubernetes
- **ë¡œë“œ ë°¸ëŸ°ì„œ**: NGINX ë˜ëŠ” ALB
- **ë°ì´í„°ë² ì´ìŠ¤**: ê´€ë¦¬í˜• PostgreSQL (RDS)
- **ëª¨ë‹ˆí„°ë§**: Grafana + Prometheus
- **ë¡œê¹…**: ELK Stack ë˜ëŠ” CloudWatch

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ & ìš´ì˜

### í•µì‹¬ ë©”íŠ¸ë¦­
- **ì‘ë‹µ ì‹œê°„**: API ì—”ë“œí¬ì¸íŠ¸ë³„ í‰ê· /P95
- **ì—ëŸ¬ìœ¨**: HTTP 4xx/5xx ë¹„ìœ¨
- **ì²˜ë¦¬ëŸ‰**: ì´ˆë‹¹ ìš”ì²­ ìˆ˜ (RPS)
- **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ **: CPU/ë©”ëª¨ë¦¬/ë””ìŠ¤í¬

### ì•ŒëŒ ê¸°ì¤€
- API ì‘ë‹µ ì‹œê°„ > 2ì´ˆ
- ì—ëŸ¬ìœ¨ > 5%
- CPU ì‚¬ìš©ë¥  > 80%
- ë””ìŠ¤í¬ ì‚¬ìš©ë¥  > 90%

---

### ğŸš€ LangGraph ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
```python
class LangGraphMonitor:
    """ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ë¹„êµ ì‹œìŠ¤í…œ"""
    
    def __init__(self):
        self.performance_metrics = {}
        self.comparison_data = defaultdict(list)
    
    async def track_execution(self, agent_name: str, method: str, func, *args, **kwargs):
        """LangGraph vs Legacy ì„±ëŠ¥ ë¹„êµ"""
        start_time = time.time()
        
        try:
            result = await func(*args, **kwargs)
            execution_time = time.time() - start_time
            
            # ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
            self.record_metric(agent_name, method, execution_time, True)
            
            return result
        except Exception as e:
            execution_time = time.time() - start_time
            self.record_metric(agent_name, method, execution_time, False)
            raise
```

### PostgreSQL ì²´í¬í¬ì¸í„° í†µí•©
```sql
-- LangGraph ì²´í¬í¬ì¸í„° í…Œì´ë¸”
CREATE TABLE checkpoints (
    thread_id TEXT NOT NULL,
    checkpoint_ns TEXT NOT NULL DEFAULT '',
    checkpoint_id TEXT NOT NULL,
    parent_checkpoint_id TEXT,
    type TEXT,
    checkpoint JSONB NOT NULL,
    metadata JSONB NOT NULL DEFAULT '{}',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    PRIMARY KEY (thread_id, checkpoint_ns, checkpoint_id)
);

CREATE INDEX idx_checkpoints_thread_id ON checkpoints(thread_id);
CREATE INDEX idx_checkpoints_parent_id ON checkpoints(parent_checkpoint_id);
```

---

**ì—…ë°ì´íŠ¸**: 2025-09-10  
**ë²„ì „**: v3.0 (LangGraph Edition)  
**ìƒíƒœ**: LangGraph Multi-Agent ì•„í‚¤í…ì²˜ ì™„ì„± - ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ StateGraph ì‹œìŠ¤í…œ